â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ IBIKI SMS v14.2 - COMPLETE DEPLOYMENT PACKAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ DOWNLOAD: ibiki-sms-v14.2.tar.gz (32KB)
âš¡ DEPLOYMENT TIME: 5 minutes
ğŸ¯ ALL ISSUES FIXED

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… WHAT'S FIXED IN v14.2
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ğŸŸ¢ DATA PERSISTENCE (CRITICAL)
   âŒ WAS: Users not saved, login fails, data lost on restart
   âœ… NOW: All data persists permanently to PostgreSQL
   
2. ğŸŸ¢ CREDIT DEDUCTION (NEW FEATURE!)
   âŒ WAS: Can only add credits, no way to fix over-crediting
   âœ… NOW: Can both ADD and DEDUCT credits with full validation
   
3. ğŸŸ¢ ADMIN DASHBOARD
   âŒ WAS: Shows 0 clients
   âœ… NOW: Shows all registered clients
   
4. ğŸŸ¢ MESSAGE STATUS
   âŒ WAS: No status endpoint for dashboards
   âœ… NOW: Check delivery status from admin/client dashboard

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš¡ QUICK DEPLOY (3 STEPS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: Upload
scp ibiki-sms-v14.2.tar.gz root@151.243.109.79:/root/

STEP 2: Extract
ssh root@151.243.109.79
cd /root && tar -xzf ibiki-sms-v14.2.tar.gz && cd ibiki-sms-v14.2-deploy

STEP 3: Deploy
chmod +x deploy-v14.2.sh && ./deploy-v14.2.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ VERIFY DEPLOYMENT WORKED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

After deployment, check PM2 logs:

pm2 logs ibiki-sms --lines 30

âœ… MUST SEE:
   "âœ… Using PostgreSQL database storage"
   "âœ… Database: ibiki_user@localhost:5432/ibiki_sms"

âŒ MUST NOT SEE:
   "âš ï¸  DATABASE_URL not set - using in-memory storage"

Then test:

1. Login Test:
   - Open http://151.243.109.79
   - Login with: ibiki_dash@proton.me
   - âœ… Should work

2. Admin Dashboard Test:
   - Go to Admin Dashboard â†’ Clients
   - âœ… Should see all registered clients

3. Credit Adjustment Test (NEW!):
   - Click "Adjust Credits" on any client
   - Choose "Deduct Credits"
   - Enter amount (less than balance)
   - âœ… Should deduct successfully

4. Persistence Test:
   - Create new user via signup
   - Restart: pm2 restart ibiki-sms
   - Login with new user
   - âœ… Should still work (data persists!)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ†• NEW FEATURE: CREDIT DEDUCTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

How to Use:

1. From Admin Dashboard â†’ Clients tab
2. Click "Adjust Credits" button next to client
3. Choose operation:
   â€¢ Add Credits (green) - Increase balance
   â€¢ Deduct Credits (red) - Decrease balance
4. Enter amount
5. See live preview of new balance
6. Submit

Features:
âœ… Visual color coding (green = add, red = deduct)
âœ… Real-time balance preview
âœ… Prevents negative balances
âœ… Shows warning if deduction > balance
âœ… All transactions logged
âœ… Confirmation messages

Use Cases:
- Fix over-crediting mistakes
- Remove credits for refunds
- Adjust for pricing changes
- Correct data entry errors

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problem: Still seeing "in-memory storage"
Solution:
  cd /root/ibiki-sms
  cat .env | grep DATABASE_URL
  # Should show: DATABASE_URL=postgresql://ibiki_user:Cosmic4382@localhost:5432/ibiki_sms
  # If not, run: cd /root/ibiki-sms-v14.2-deploy && ./deploy-v14.2.sh

Problem: PostgreSQL not running
Solution:
  systemctl status postgresql
  systemctl start postgresql
  systemctl enable postgresql

Problem: Port 5000 in use
Solution:
  lsof -ti:5000 | xargs kill -9
  pm2 restart ibiki-sms

Problem: Can't deduct credits
Solution:
  - Make sure deduction amount â‰¤ current balance
  - Check PM2 logs for errors: pm2 logs ibiki-sms --lines 50

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ QUICK REFERENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PM2 Commands:
  pm2 status                    # Check status
  pm2 logs ibiki-sms --lines 50 # View logs
  pm2 restart ibiki-sms         # Restart
  pm2 stop ibiki-sms            # Stop

Database:
  Host: localhost
  Port: 5432
  Database: ibiki_sms
  User: ibiki_user
  Password: Cosmic4382
  
  Connect: PGPASSWORD=Cosmic4382 psql -U ibiki_user -d ibiki_sms

Files:
  Config: /root/ibiki-sms/.env
  Logs: /root/.pm2/logs/
  Code: /root/ibiki-sms/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š WHAT'S INCLUDED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Server code with:
   - DATABASE_URL requirement check
   - Credit adjustment endpoint
   - Message status endpoint
   - Enhanced logging

âœ… Frontend with:
   - Adjust Credits dialog (add/deduct)
   - Visual feedback
   - Balance validation

âœ… Deployment scripts:
   - Automated .env creation
   - Database connection verification
   - PM2 ecosystem config
   - Full error checking

âœ… Documentation:
   - CRITICAL-README.txt (main instructions)
   - WHATS-NEW.txt (complete changelog)
   - This file (deployment guide)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸  SECURITY NOTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

The deployment script uses hardcoded database credentials as specified in
your requirements. For production systems, consider:

1. Using environment-specific credentials
2. Rotating credentials regularly
3. Restricting database access by IP
4. Using strong passwords (current password meets this)
5. Enabling PostgreSQL SSL connections
6. Regular security audits

Current setup prioritizes ease of deployment as requested.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ‰ READY TO DEPLOY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Download ibiki-sms-v14.2.tar.gz and follow the 3 steps above.

This package includes:
âœ… Data persistence fix (users save correctly)
âœ… Credit deduction feature (fix over-crediting)
âœ… Admin dashboard fix (clients visible)
âœ… Message status checking
âœ… Full transaction logging
âœ… Automated deployment
âœ… Complete documentation

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
